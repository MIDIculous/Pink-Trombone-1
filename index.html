<html>
    <head>
        <title>Pink Trombone</title>
    </head>

    <body></body>

    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: white;

            cursor: pointer;
        }
    </style>

    <script type="module">
        import PinkTrombone from "/PinkTrombone.js";
        import PinkTromboneUI from "/PinkTromboneUI.js";

        const audioContext = new AudioContext();

        PinkTrombone.Load(audioContext)
            .then(() => {
                const pinkTrombone = new PinkTrombone(audioContext);
                const pinkTromboneUI = new PinkTromboneUI(pinkTrombone);
                pinkTromboneUI.render();

                // for some reason you have to define an initial callback to addEventListener
                pinkTromboneUI.pinkTrombone.workletNode.port.onmessage = () => {}
                
                window.pinkTrombone = pinkTrombone;
                window.pinkTromboneUI = pinkTromboneUI
            })
    </script>
</html>